import{r as h,j as e,u as ee,a as te,B as H,T as R}from"./index-xeIlzTUP.js";import{_ as ae,d as ne,A as se,u as ie,C as re,F as L,P as M,a as oe,b,c as le}from"./CommonDialogue-DTbxYuNz.js";import{u as C,c as A,a as ce,b as de,d as ue,e as pe,B as S}from"./staticData-Ccj1nKPF.js";function B(){return B=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)({}).hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},B.apply(null,arguments)}function O(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function fe(n){var t=he(n,"string");return typeof t=="symbol"?t:String(t)}function he(n,t){if(typeof n!="object"||n===null)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var i=o.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function xe(n,t,o){var i=h.useRef(n!==void 0),d=h.useState(t),y=d[0],l=d[1],c=n!==void 0,g=i.current;return i.current=c,!c&&g&&y!==t&&l(t),[c?n:y,h.useCallback(function(r){for(var x=arguments.length,s=new Array(x>1?x-1:0),f=1;f<x;f++)s[f-1]=arguments[f];o&&o.apply(void 0,[r].concat(s)),l(r)},[o])]}function me(n,t){return Object.keys(t).reduce(function(o,i){var d,y=o,l=y[O(i)],c=y[i],g=ae(y,[O(i),i].map(fe)),r=t[i],x=xe(c,l,n[r]),s=x[0],f=x[1];return B({},g,(d={},d[i]=s,d[r]=f,d))},n)}const W=ne("h4");W.displayName="DivStyledAsH4";const Q=h.forwardRef(({className:n,bsPrefix:t,as:o=W,...i},d)=>(t=C(t,"alert-heading"),e.jsx(o,{ref:d,className:A(n,t),...i})));Q.displayName="AlertHeading";const U=h.forwardRef(({className:n,bsPrefix:t,as:o=se,...i},d)=>(t=C(t,"alert-link"),e.jsx(o,{ref:d,className:A(n,t),...i})));U.displayName="AlertLink";const z=h.forwardRef((n,t)=>{const{bsPrefix:o,show:i=!0,closeLabel:d="Close alert",closeVariant:y,className:l,children:c,variant:g="primary",onClose:r,dismissible:x,transition:s=L,...f}=me(n,{show:"onClose"}),v=C(o,"alert"),P=ie(u=>{r&&r(!1,u)}),N=s===!0?L:s,k=e.jsxs("div",{role:"alert",...N?void 0:f,ref:t,className:A(l,v,g&&`${v}-${g}`,x&&`${v}-dismissible`),children:[x&&e.jsx(re,{onClick:P,"aria-label":d,variant:y}),c]});return N?e.jsx(N,{unmountOnExit:!0,...f,ref:void 0,in:i,children:k}):i?k:null});z.displayName="Alert";const ye=Object.assign(z,{Link:U,Heading:Q}),I=h.forwardRef(({bsPrefix:n,fluid:t=!1,as:o="div",className:i,...d},y)=>{const l=C(n,"container"),c=typeof t=="string"?`-${t}`:"-fluid";return e.jsx(o,{ref:y,...d,className:A(i,t?`${l}${c}`:l)})});I.displayName="Container";const Y=h.forwardRef(({bsPrefix:n,className:t,as:o="div",...i},d)=>{const y=C(n,"row"),l=ce(),c=de(),g=`${y}-cols`,r=[];return l.forEach(x=>{const s=i[x];delete i[x];let f;s!=null&&typeof s=="object"?{cols:f}=s:f=s;const v=x!==c?`-${x}`:"";f!=null&&r.push(`${g}${v}-${f}`)}),e.jsx(o,{ref:d,...i,className:A(t,y,...r)})});Y.displayName="Row";const we=()=>{const n=ee(),{notificationId:t}=te(),o=ue.map(a=>a.stateName),{addNewNotification:i,updateNotificationDetailById:d,getNotificationDetailsById:y,notificationDetailsByIdList:l}=pe(),[c,g]=h.useState(0),[r,x]=h.useState(l),[s,f]=h.useState({}),[v,P]=h.useState(!1),[N,k]=h.useState(!1),[u,_]=h.useState(null),$=["ns3122","rs3122"],[F,D]=h.useState("");h.useEffect(()=>{t&&y(t),(l==null?void 0:l.length)>0&&x(l)},[t,l==null?void 0:l.length]),h.useEffect(()=>{if(r){const a={1:r.notificationHeader,2:r.notificationSubHeader,3:r.notificationDate.split("/").reverse().join("-"),4:r.applyStartDate.split("/").reverse().join("-"),5:r.applyEndDate.split("/").reverse().join("-"),6:r.applicationFee,7:r.officialWebSite,8:r.eligibility,9:r.isNewNotification?"Yes":"No",10:r.stateName,11:r.notificationType,12:r.ownerName||""};f(a)}},[r]);const j=[{id:1,question:"Notification Header",type:"input",maxLength:22},{id:2,question:"Notification SubHeader",type:"input",maxLength:30},{id:3,question:"Notification Date?",type:"date"},{id:4,question:"Application Start Date",type:"date"},{id:5,question:"Application End Date",type:"date"},{id:6,question:"Application Fee",type:"input",maxLength:20},{id:7,question:"Official Website",type:"input",maxLength:200},{id:8,question:"Eligibility",type:"input",maxLength:15},{id:9,question:"Is New Notification",type:"radio",options:["Yes","No"]},{id:10,question:"Select State",type:"dropdown",options:o},{id:11,question:"Notification Type",type:"dropdown",options:["Job","Admission","Entrance"]},{id:12,question:"Owner Name",type:"input",maxLength:12}],E=(a,m,w)=>{w&&m.length>w||f(p=>({...p,[a]:m}))},q=()=>{const a=j[c];return s[a.id]?(D(""),!0):(D(`Please answer: "${a.question}"`),!1)},K=()=>{q()&&c<j.length-1&&g(a=>a+1)},V=()=>{D(""),c>0&&g(a=>a-1)},T=a=>{const[m,w,p]=a.split("-");return`${p}/${w}/${m}`},G=async()=>{const a={notificationHeader:s[1],notificationSubHeader:s[2],notificationDate:s[3]?T(s[3]):null,applyStartDate:s[4]?T(s[4]):null,applyEndDate:s[5]?T(s[5]):null,applicationFee:s[6],officialWebSite:s[7],eligibility:s[8],isNewNotification:s[9]==="Yes",stateName:s[10],notificationType:s[11]};if($!=null&&$.includes(s[12]))try{const m=await t?d(t||"",a):i(a);(m==null?void 0:m.status)==="Success"?J():H.error(m==null?void 0:m.message)}catch(m){console.log(m)}else H.error("You are not allowed!")},J=async()=>{var a;_({title:"Success",bodyContent:e.jsxs("div",{style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:"100%"},children:[e.jsx("div",{children:e.jsx("i",{className:"bi bi-check-circle-fill",style:{fontSize:"2.5rem"}})}),e.jsx("div",{className:"ps-3",children:e.jsx("span",{style:{fontSize:"1.2rem",color:"black"},children:t?(a=R)==null?void 0:a.notificationUpdateMsg:R.notificationAddMsg})})]}),cancelText:"Close",acceptText:t?"Go to List":"Add New",handleProceed:t?()=>n("/manageNotificationsData"):()=>window.location.reload(),handleClose:()=>n("/")}),k(!0)},X=a=>{var m,w;switch(a.type){case"input":return e.jsx(b.Control,{type:"text",value:s[a.id]||"",onChange:p=>E(a.id,p.target.value,a.maxLength)});case"date":return e.jsx(b.Control,{type:"date",value:s[a.id]||"",onChange:p=>E(a.id,p.target.value)});case"radio":return e.jsx("div",{children:(m=a.options)==null?void 0:m.map(p=>e.jsx(b.Check,{type:"radio",name:`question-${a.id}`,label:p,value:p,checked:s[a.id]===p,onChange:Z=>E(a.id,Z.target.value),inline:!0},p))});case"dropdown":return e.jsxs(b.Select,{value:s[a.id]||"",onChange:p=>E(a.id,p.target.value),children:[e.jsx("option",{value:"",children:"Select"}),(w=a.options)==null?void 0:w.map(p=>e.jsx("option",{value:p,children:p},p))]});default:return null}};return e.jsxs(e.Fragment,{children:[t?e.jsx(M,{data:"Edit Notification"}):e.jsx(M,{data:"Create Notification"}),e.jsx(I,{style:{padding:"20px",maxWidth:"600px",background:"white",borderRadius:"10px",boxShadow:"0 2px 4px rgb(10, 10, 10)",color:"black"},children:v?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mb-4",children:"Please Verify"}),e.jsx("ul",{className:"list-group",children:j.map(a=>e.jsxs("li",{className:"list-group-item",children:[e.jsx("strong",{children:a.question}),":"," ",s[a.id]||"Not answered"]},a.id))}),e.jsxs("div",{className:"mt-4 d-flex justify-content-between",children:[e.jsx(S,{variant:"secondary",onClick:()=>P(!1),children:"Back to Edit"}),e.jsx(S,{variant:"primary",onClick:G,children:"Submit"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:e.jsxs(oe,{children:[e.jsxs("h6",{style:{display:"flex",justifyContent:"flex-end"},children:["Question ",c+1,"/",j.length]}),e.jsxs("p",{className:"text-capitalize font-weight-normal fs-5",style:{marginBottom:"0px"},children:[j[c].question,"Â ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx(b,{children:X(j[c])})]})}),F&&e.jsx(ye,{variant:"danger",className:"mt-1",children:F}),e.jsxs("div",{className:"mt-4 d-flex justify-content-between",children:[e.jsx(S,{variant:"secondary",onClick:V,disabled:c===0,children:"Prev"}),c<j.length-1?e.jsx(S,{variant:"primary",onClick:K,children:"Next"}):e.jsx(S,{variant:"success",onClick:()=>P(!0),children:"Preview"})]})]})}),u&&e.jsx(le,{title:u==null?void 0:u.title,dialogueShow:N,handleClose:u==null?void 0:u.handleClose,bodyContent:u==null?void 0:u.bodyContent,cancelText:u==null?void 0:u.cancelText,acceptText:u==null?void 0:u.acceptText,handleProceed:u.handleProceed})]})};export{we as default};
//# sourceMappingURL=NotificationForm-D9DJB2yP.js.map
